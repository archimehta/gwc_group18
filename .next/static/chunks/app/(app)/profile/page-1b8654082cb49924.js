(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{628:function(e,t,a){Promise.resolve().then(a.bind(a,2316))},2316:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var s=a(7437),r=a(2265),n=a(9376),i=a(5355),l=a(6070),o=a(3360),d=a(4508);let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.fC,{ref:t,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});c.displayName=o.fC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.Ee,{ref:t,className:(0,d.cn)("aspect-square h-full w-full",a),...r})}).displayName=o.Ee.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.NY,{ref:t,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});u.displayName=o.NY.displayName;var m=a(2869),f=a(5186),x=a(8300),p=a(2489);let g=x.fC;x.xz;let h=x.h_;x.x8;let N=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});N.displayName=x.aV.displayName;let y=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(h,{children:[(0,s.jsx)(N,{}),(0,s.jsxs)(x.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(x.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});y.displayName=x.VY.displayName;let v=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};v.displayName="DialogHeader";let b=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};b.displayName="DialogFooter";let j=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});j.displayName=x.Dx.displayName;let w=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});w.displayName=x.dk.displayName;var D=a(5156);let k=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,s.jsx)(D.f,{ref:t,decorative:n,orientation:r,className:(0,d.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...i})});k.displayName=D.f.displayName;var S=a(3075),C=a(8184),O=a(7992),E=a(6039),T=a(8893),R=a(2735),A=a(8930),z=a(6399),I=a(9547);function U(){let e=(0,n.useRouter)(),t=(0,i.q)(e=>e.initialize),a=(0,i.q)(e=>e.displayName),o=(0,i.q)(e=>e.updateDisplayName),d=(0,i.q)(e=>e.clearAllData),x=(0,i.q)(e=>e.logs),p=(0,i.q)(e=>e.streakDays),h=(0,i.q)(e=>e.lifetimeGrams),[N,D]=(0,r.useState)(!1),[U,_]=(0,r.useState)(a),[P,F]=(0,r.useState)(!1),{toast:M}=(0,O.pm)();return(0,r.useEffect)(()=>{t(),_(a)},[t,a]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Profile"})}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{children:"Account"})}),(0,s.jsx)(l.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(c,{className:"h-16 w-16",children:(0,s.jsx)(u,{className:"text-xl",children:a[0]})}),(0,s.jsx)("div",{className:"flex-1",children:N?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.I,{value:U,onChange:e=>_(e.target.value),className:"max-w-xs"}),(0,s.jsx)(m.z,{size:"sm",onClick:()=>{o(U),D(!1),M({title:"Name updated",description:"Your display name has been updated"})},children:"Save"}),(0,s.jsx)(m.z,{size:"sm",variant:"outline",onClick:()=>{_(a),D(!1)},children:"Cancel"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:a}),(0,s.jsxs)(m.z,{variant:"ghost",size:"sm",onClick:()=>D(!0),className:"mt-1",children:[(0,s.jsx)(T.Z,{className:"h-4 w-4 mr-1"}),"Edit name"]})]})})]})})]}),0===h?(0,s.jsx)(C.u,{title:"No logs yet",description:"No logs yet — go to Log to start."}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl",children:[(0,s.jsx)(S.R,{icon:(0,s.jsx)(z.Z,{className:"h-6 w-6 text-warn"}),title:"Streak",value:"".concat(p,"-day streak"),caption:"Log at least once a day to keep it going."}),(0,s.jsx)(S.R,{icon:(0,s.jsx)(I.Z,{className:"h-6 w-6 text-success"}),title:"Lifetime CO₂ Saved",value:(0,E.g)(h),caption:"All-time CO₂ saved."})]}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{children:"Settings"})}),(0,s.jsxs)(l.aY,{className:"space-y-4",children:[(0,s.jsxs)(m.z,{variant:"outline",onClick:()=>{let e=new Blob([JSON.stringify({logs:x,exportDate:new Date().toISOString()},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="ecotrack-export-".concat(new Date().toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(t),M({title:"Exported",description:"Your logs have been exported"})},className:"w-full",children:[(0,s.jsx)(R.Z,{className:"h-4 w-4 mr-2"}),"Export my logs (JSON)"]}),(0,s.jsx)(k,{}),(0,s.jsxs)(m.z,{variant:"destructive",onClick:()=>F(!0),className:"w-full",children:[(0,s.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Clear local data"]})]})]}),(0,s.jsx)(g,{open:P,onOpenChange:F,children:(0,s.jsxs)(y,{children:[(0,s.jsxs)(v,{children:[(0,s.jsx)(j,{children:"Clear All Data"}),(0,s.jsx)(w,{children:"This will permanently delete all your logs and data. This action cannot be undone."})]}),(0,s.jsxs)(b,{children:[(0,s.jsx)(m.z,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,s.jsx)(m.z,{variant:"destructive",onClick:()=>{d(),F(!1),M({title:"Data cleared",description:"All local data has been cleared"}),e.push("/")},children:"Clear All Data"})]})]})})]})}},8184:function(e,t,a){"use strict";a.d(t,{u:function(){return n}});var s=a(7437),r=a(2869);function n(e){let{icon:t,title:a,description:n,action:i}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[t&&(0,s.jsx)("div",{className:"mb-4",children:t}),(0,s.jsx)("h3",{className:"text-xl font-semibold",children:a}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground max-w-md",children:n}),i&&(0,s.jsx)(r.z,{onClick:i.onClick,className:"mt-6",children:i.label})]})}},3075:function(e,t,a){"use strict";a.d(t,{R:function(){return n}});var s=a(7437),r=a(6070);function n(e){let{title:t,value:a,caption:n,icon:i}=e;return(0,s.jsx)(r.Zb,{children:(0,s.jsx)(r.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[i&&(0,s.jsx)("div",{className:"text-3xl shrink-0",children:i}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-2xl font-bold mb-1",children:a}),(0,s.jsx)("div",{className:"text-sm font-semibold text-foreground mb-1",children:t}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:n})]})]})})})}},2869:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var s=a(7437),r=a(2265),n=a(7053),i=a(535),l=a(4508);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...c})});d.displayName="Button"},6070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var s=a(7437),r=a(2265),n=a(4508);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},5186:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(7437),r=a(2265),n=a(4508);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},7992:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var s=a(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},6039:function(e,t,a){"use strict";function s(e){return"".concat((Math.round(e/10)/100).toFixed(1)," kg")}function r(e){return e>=1e3?s(e):"".concat(Math.round(e)," g")}function n(e,t){return 1===t?e:"".concat(e,"s")}a.d(t,{_6:function(){return n},g:function(){return s},mk:function(){return r}})},5355:function(e,t,a){"use strict";a.d(t,{q:function(){return f}});var s=a(9625),r=a(6942),n=a(936),i=a(6357),l=a(1295),o=a(3025);let d="ecotrack:v1";function c(e){try{localStorage.setItem(d,JSON.stringify(e))}catch(e){console.error("Failed to save state:",e)}}let u=[{id:"walk-mile",name:"Walked instead of driving",unit:"mile",gramsPerUnit:404,icon:"\uD83D\uDEB6"},{id:"bike-mile",name:"Biked instead of driving",unit:"mile",gramsPerUnit:404,icon:"\uD83D\uDEB2"},{id:"transit-trip",name:"Took public transit",unit:"trip",gramsPerUnit:200,icon:"\uD83D\uDE8C"},{id:"carpool-trip",name:"Carpooled",unit:"trip",gramsPerUnit:150,icon:"\uD83D\uDE97"},{id:"vegetarian-meal",name:"Ate a vegetarian meal",unit:"meal",gramsPerUnit:500,icon:"\uD83E\uDD57"},{id:"reusable-bottle",name:"Used a reusable bottle",unit:"day",gramsPerUnit:82,icon:"\uD83C\uDF7C"},{id:"air-dry-laundry",name:"Air-dried laundry",unit:"load",gramsPerUnit:700,icon:"\uD83D\uDC55"},{id:"unplug-electronics",name:"Unplugged idle electronics",unit:"item",gramsPerUnit:50,icon:"\uD83D\uDD0C"},{id:"cold-shower",name:"15-min cold shower",unit:"minute",gramsPerUnit:200,icon:"\uD83D\uDEBF"},{id:"recycle",name:"Recycled items",unit:"item",gramsPerUnit:150,icon:"♻️"}];function m(e){if(0===e.length)return 0;let t=(0,r.b)(new Date),a=e.map(e=>(0,r.b)((0,n.D)(e.dateISO))).filter((e,t,a)=>a.findIndex(t=>(0,i.K)(t,e))===t).sort((e,t)=>t.getTime()-e.getTime());if(0===a.length||!a.some(e=>(0,i.K)(e,t)))return 0;let s=1,d=(0,r.b)((0,l.k)(t,1)),c=0,u=a.filter(e=>!(0,i.K)(e,t));for(;c<u.length;)if((0,i.K)(u[c],d))s++,c++,d=(0,r.b)((0,l.k)(d,1));else{if((0,o.j)(d,u[c])>1)break;d=(0,r.b)((0,l.k)(d,1))}return s}let f=(0,s.Ue)((e,t)=>{let a={logs:[],streakDays:0,lifetimeGrams:0,displayName:"Eco Hero"};return{habits:u,...a,initialize:()=>{let t=function(){try{let e=localStorage.getItem(d);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load state:",e),{}}}(),a=t.logs||[],s=m(a),r=a.reduce((e,t)=>e+t.gramsSaved,0);e({logs:a,streakDays:s,lifetimeGrams:r,displayName:t.displayName||"Eco Hero"})},addLog:(a,s)=>{let r=u.find(e=>e.id===a);if(!r)return null;let n=r.gramsPerUnit*s,i={id:"".concat(Date.now(),"-").concat(Math.random()),habitId:a,quantity:s,gramsSaved:n,dateISO:new Date().toISOString()},l=[...t().logs,i],o=m(l),d=l.reduce((e,t)=>e+t.gramsSaved,0),f={logs:l,streakDays:o,lifetimeGrams:d,displayName:t().displayName};return e(f),c(f),{gramsSaved:n,habitName:r.name}},updateDisplayName:a=>{let s={logs:t().logs,streakDays:t().streakDays,lifetimeGrams:t().lifetimeGrams,displayName:a};e({displayName:a}),c(s)},clearAllData:()=>{!function(){try{localStorage.removeItem(d)}catch(e){console.error("Failed to clear data:",e)}}(),e(a)}}})},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[590,288,220,106,971,117,744],function(){return e(e.s=628)}),_N_E=e.O()}]);